(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f3fa249"],{"628a":function(t,a,s){},"6b0d":function(t,a,s){"use strict";var e=s("628a"),i=s.n(e);i.a},bb51:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"home"},[s("div",{staticClass:"header"},[s("div",{staticClass:"address_map",on:{click:function(a){return t.$router.push({name:"Address",params:{city:t.city}})}}},[s("i",{staticClass:"fa fa-map-marker"}),s("span",[t._v(t._s(t.address))]),s("i",{staticClass:"fa fa-sort-desc"})])]),s("div",{staticClass:"search_wrap",class:{fixedview:t.showFilter},on:{click:function(a){return t.$router.push("/search")}}},[t._m(0)]),s("div",{attrs:{id:"container"}},[s("mt-swipe",{staticClass:"swiper",attrs:{auto:4e3}},t._l(t.swipeImgs,(function(t,a){return s("mt-swipe-item",{key:a},[s("img",{attrs:{src:t,alt:""}})])})),1),s("mt-swipe",{staticClass:"entries",attrs:{auto:0}},t._l(t.entries,(function(a,e){return s("mt-swipe-item",{key:e,staticClass:"entry_wrap"},t._l(a,(function(a,e){return s("div",{key:e,staticClass:"foodentry"},[s("div",{staticClass:"img_wrap"},[s("img",{attrs:{src:a.image,alt:""}})]),s("span",[t._v(t._s(a.name))])])})),0)})),1)],1),s("div",{staticClass:"shoplist-title"},[t._v("推荐商家")]),s("FilterView",{attrs:{filterData:t.filterData},on:{searchFixed:t.showFilterView,update:t.update}}),s("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadData,"bottom-method":t.loadMore,"bottom-all-loaded":t.allLoaded,"auto-fill":!1,bottomPullText:t.bottomPullText}},[s("div",{staticClass:"shoplist"},t._l(t.restaurants,(function(t,a){return s("IndexShop",{key:a,attrs:{restaurant:t.restaurant}})})),1)])],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"shop_search"},[s("i",{staticClass:"fa fa-search"}),t._v(" 搜索商家 商家名称 ")])}],o=(s("99af"),s("4160"),s("d3b7"),s("159b"),s("ddb0"),s("76a0"),s("dbdd")),r=s("06e6"),n={name:"home",components:{FilterView:o["a"],IndexShop:r["a"]},computed:{address:function(){return this.$store.getters.address},city:function(){return this.$store.getters.location.addressComponent.city||this.$store.getters.location.addressComponent.province}},data:function(){return{swipeImgs:[],entries:[],filterData:null,showFilter:!1,page:1,size:5,restaurants:[],allLoaded:!1,bottomPullText:"上拉加载更多",data:null}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.$axios("/api/profile/shopping").then((function(a){t.swipeImgs=a.data.swipeImgs,t.entries=a.data.entries})),this.$axios("/api/profile/filter").then((function(a){t.filterData=a.data})),this.loadData()},showFilterView:function(t){this.showFilter=t},update:function(t){this.data=t,this.loadData()},loadData:function(){var t=this;this.page=1,this.allLoaded=!1,this.bottomPullText="上拉加载更多",this.$axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size),this.data).then((function(a){t.$refs.loadmore.onTopLoaded(),t.restaurants=a.data}))},loadMore:function(){var t=this;this.allLoaded||(this.page++,this.$axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size)).then((function(a){t.$refs.loadmore.onBottomLoaded(),a.data.length>0?(a.data.forEach((function(a){t.restaurants.push(a)})),a.data<t.size&&(t.allLoaded=!0,t.bottomPullText="没有更多了哦")):(t.allLoaded=!0,t.bottomPullText="没有更多了哦")})))}}},l=n,d=(s("6b0d"),s("2877")),c=Object(d["a"])(l,e,i,!1,null,"72a35416",null);a["default"]=c.exports},ddb0:function(t,a,s){var e=s("da84"),i=s("fdbc"),o=s("e260"),r=s("9112"),n=s("b622"),l=n("iterator"),d=n("toStringTag"),c=o.values;for(var u in i){var h=e[u],f=h&&h.prototype;if(f){if(f[l]!==c)try{r(f,l,c)}catch(m){f[l]=c}if(f[d]||r(f,d,u),i[u])for(var p in o)if(f[p]!==o[p])try{r(f,p,o[p])}catch(m){f[p]=o[p]}}}}}]);
//# sourceMappingURL=chunk-0f3fa249.74f56795.js.map