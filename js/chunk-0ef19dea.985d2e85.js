(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ef19dea"],{"0418":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLeft,expression:"isLeft"}],staticClass:"header-button is-left"},[n("i",{staticClass:"fa fa-chevron-left"}),n("button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]),n("h1",{staticClass:"header-title"},[t._v(t._s(t.title))])])},s=[],a={name:"Header",props:{title:String,isLeft:{type:Boolean,default:!1}}},r=a,o=(n("fc64"),n("2877")),c=Object(o["a"])(r,i,s,!1,null,"256d0b90",null);e["a"]=c.exports},"0d03":function(t,e,n){var i=n("6eeb"),s=Date.prototype,a="Invalid Date",r="toString",o=s[r],c=s.getTime;new Date(NaN)+""!=a&&i(s,r,(function(){var t=c.call(this);return t===t?o.call(this):a}))},"16c2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pay"},[n("Header",{attrs:{title:"在线支付"}}),t.orderInfo?n("div",{staticClass:"main"},[n("div",{staticClass:"tip"},[n("p",{staticClass:"countdown-title"},[t._v("支付剩余时间")]),n("h3",{staticClass:"countdown-text"},[t._v(t._s(t.countDown))])]),n("section",{staticClass:"home"},[n("ul",{staticClass:"list info-list"},[n("li",[n("span",{staticClass:"order-name"},[t._v(t._s(t.orderInfo.shopInfo.name))]),n("span",{staticClass:"text-highlight"},[t._v("￥"+t._s(t.totalPrice))])])]),n("div",{staticClass:"title"},[t._v("在线支付")]),t._m(0)]),n("button",{staticClass:"btn-submit",attrs:{disabled:t.tiemOut},on:{click:t.pay}},[t._v("确认支付")])]):t._e()],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"list payment-list"},[i("li",{staticClass:"payment-list-item"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:n("68de"),alt:""}}),i("span",[t._v("微信")])]),i("i",{staticClass:"fa fa-check-circle selected"})])])}],a=(n("0d03"),n("d3b7"),n("25f0"),n("0418")),r={name:"Pay",components:{Header:a["a"]},computed:{orderInfo:function(){return this.$store.getters.orderInfo},totalPrice:function(){return this.$store.getters.totalPrice},userInfo:function(){return this.$store.getters.userInfo},remarkInfo:function(){return this.$store.getters.remarkInfo}},data:function(){return{countDown:"00:15:00",timer:null,tiemOut:!1}},beforeRouteEnter:function(t,e,n){n((function(t){t.countTimeDown()}))},methods:{countTimeDown:function(){var t=this,e=14,n=59;this.timer=setInterval((function(){if(n--,"00"==n&&"00"==e)return t.countDown="订单已超时",clearInterval(t.timer),void(t.tiemOut=!0);"00"==n&&(n=59,e--,e<10&&(e="0"+e)),n<10&&(n="0"+n),t.countDown="00:"+e+":"+n}),1e3)},pay:function(){var t=this,e={body:"米修在线",out_trade_no:(new Date).getTime().toString(),total_fee:.01};alert("进入到pay方法中"),fetch("http://www.thenewstep.cn/wxzf/example/jsapi.php",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(e){t.onBridgeReady(e)})).catch((function(t){alert("请求失败")}))},onBridgeReady:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",t,(function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.addOrder()}))},addOrder:function(){var t=this,e={orderInfo:this.orderInfo,userInfo:this.userInfo,totalPrice:this.totalPrice,remarkInfo:this.remarkInfo};this.$axios.post("/api/user/add_order/".concat(localStorage.ele_login),e).then((function(e){t.$router.push("/order")}))}}},o=r,c=(n("856f"),n("2877")),u=Object(c["a"])(o,i,s,!1,null,"3d638fc4",null);e["default"]=u.exports},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),s=n("825a"),a=n("d039"),r=n("ad6d"),o="toString",c=RegExp.prototype,u=c[o],l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=o;(l||f)&&i(RegExp.prototype,o,(function(){var t=s(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?r.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"595b":function(t,e,n){},"68de":function(t,e,n){t.exports=n.p+"img/wechart.0055285e.jpg"},"856f":function(t,e,n){"use strict";var i=n("595b"),s=n.n(i);s.a},b892:function(t,e,n){},fc64:function(t,e,n){"use strict";var i=n("b892"),s=n.n(i);s.a}}]);
//# sourceMappingURL=chunk-0ef19dea.985d2e85.js.map